(function(t){function e(e){for(var n,u,c=e[0],i=e[1],s=e[2],l=0,f=[];l<c.length;l++)u=c[l],Object.prototype.hasOwnProperty.call(o,u)&&o[u]&&f.push(o[u][0]),o[u]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);p&&p(e);while(f.length)f.shift()();return a.push.apply(a,s||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,u=1;u<r.length;u++){var i=r[u];0!==o[i]&&(n=!1)}n&&(a.splice(e--,1),t=c(c.s=r[0]))}return t}var n={},o={app:0},a=[];function u(t){return c.p+"js/"+({lobby:"lobby",room:"room"}[t]||t)+"."+{lobby:"c97330ca",room:"63bdacc8"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(t){var e=[],r=o[t];if(0!==r)if(r)e.push(r[2]);else{var n=new Promise((function(e,n){r=o[t]=[e,n]}));e.push(r[2]=n);var a,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=u(t);var s=new Error;a=function(e){i.onerror=i.onload=null,clearTimeout(l);var r=o[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",s.name="ChunkLoadError",s.type=n,s.request=a,r[1](s)}o[t]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:i})}),12e4);i.onerror=i.onload=a,document.head.appendChild(i)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(r,n,function(e){return t[e]}.bind(null,n));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var p=s;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("cd49")},"9cdc":function(t,e,r){"use strict";r("c701")},c701:function(t,e,r){},cd49:function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),o=Object(n["f"])("Museum Map"),a=Object(n["f"])("Virtual Museum"),u={key:0},c={key:1},i=Object(n["g"])("footer",null,[Object(n["g"])("div",null,[Object(n["g"])("a",{href:"https://www.room3b.eu/pages/projects/digital-museum-map.html",target:"_blank",rel:"noopener"},"Find out more about how this works")]),Object(n["g"])("div",null,[Object(n["g"])("a",{href:"https://collections.vam.ac.uk/",target:"_blank",rel:"noopener"},"Objects, Images, and Meta-data provided by the V&A")]),Object(n["g"])("div",null,[Object(n["g"])("a",{href:"http://www.getty.edu/research/tools/vocabularies/aat/",target:"_blank",rel:"noopener"},"Includes part of the AAT")])],-1),s={key:0,id:"loading"},l=Object(n["g"])("div",null,"Loading",-1),p=Object(n["g"])("svg",{width:"100",height:"100",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#1e4b9b"},[Object(n["g"])("g",{fill:"none","fill-rule":"evenodd"},[Object(n["g"])("g",{transform:"translate(1 1)","stroke-width":"2"},[Object(n["g"])("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[Object(n["g"])("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1.5s",repeatCount:"indefinite"})])])])],-1);function f(t,e,r,f,b,d){var h=Object(n["v"])("router-link"),m=Object(n["v"])("router-view");return Object(n["p"])(),Object(n["d"])("main",null,[Object(n["g"])("header",null,[Object(n["g"])("h1",null,[o,t.currentRoom&&t.currentGroup?(Object(n["p"])(),Object(n["d"])(n["a"],{key:0},[Object(n["f"])(" - "+Object(n["x"])(t.roomTitle),1)],64)):Object(n["e"])("",!0)]),Object(n["g"])("nav",null,[Object(n["g"])("ol",null,[Object(n["g"])("li",null,[Object(n["g"])(h,{to:"/"},{default:Object(n["A"])((function(){return[a]})),_:1})]),t.currentRoom&&t.currentFloor?(Object(n["p"])(),Object(n["d"])("li",u,[Object(n["g"])("button",null,Object(n["x"])(t.currentFloor.attributes.label),1)])):Object(n["e"])("",!0),t.currentRoom&&t.currentGroup?(Object(n["p"])(),Object(n["d"])("li",c,[Object(n["g"])("button",null,"Room "+Object(n["x"])(t.roomTitle),1)])):Object(n["e"])("",!0)])])]),Object(n["g"])(m),i,t.loading?(Object(n["p"])(),Object(n["d"])("div",s,[l,p])):Object(n["e"])("",!0)])}var b=r("d4ec"),d=r("bee2"),h=r("262e"),m=r("2caf"),j=r("9ab4"),g=r("ce1f"),O=r("ffbb"),v=function(t){Object(h["a"])(r,t);var e=Object(m["a"])(r);function r(){return Object(b["a"])(this,r),e.apply(this,arguments)}return Object(d["a"])(r,[{key:"created",value:function(){this.$store.dispatch("fetchFloors")}},{key:"loading",get:function(){return this.$store.state.ui.loadingCount>0}},{key:"currentRoom",get:function(){if(this.$router.currentRoute&&this.$router.currentRoute.value.params.rid){var t=this.$router.currentRoute.value.params.rid;if(this.$store.state.objects.rooms[t])return this.$store.state.objects.rooms[t]}return null}},{key:"currentGroup",get:function(){if(this.currentRoom&&this.currentRoom.relationships&&this.currentRoom.relationships.group){var t=this.currentRoom.relationships.group.data.id;if(this.$store.state.objects.groups[t])return this.$store.state.objects.groups[t]}return null}},{key:"roomTitle",get:function(){return this.currentRoom&&this.currentGroup&&this.currentRoom.attributes&&this.currentGroup.attributes?this.currentRoom.attributes.number+" - "+this.currentGroup.attributes.label:"Museum Map"}},{key:"currentFloor",get:function(){if(this.currentRoom&&this.currentRoom.relationships&&this.currentRoom.relationships.floor){var t=this.currentRoom.relationships.floor.data.id;if(this.$store.state.objects.floors[t])return this.$store.state.objects.floors[t]}return null}}]),r}(O["a"]);v=Object(j["a"])([Object(g["a"])({components:{},watch:{roomTitle:function(t){document.title="Room "+t}}})],v);var y=v;r("9cdc");y.render=f;var w=y,x=(r("d3b7"),r("6c02")),R=[{path:"/",name:"lobby",component:function(){return r.e("lobby").then(r.bind(null,"417e"))}},{path:"/room/:rid",name:"room",component:function(){return r.e("room").then(r.bind(null,"3ab1"))},props:!0}],k=Object(x["a"])({history:Object(x["b"])(),routes:R}),G=k,L=(r("4160"),r("a15b"),r("d81d"),r("3ca3"),r("159b"),r("ddb0"),r("96cf"),r("1da1")),M=r("5502"),$=Object(M["a"])({state:{objects:{rooms:{},groups:{},floors:{},items:{}},ui:{loadingCount:0}},mutations:{storeObject:function(t,e){t.objects[e.type][e.id]=e},setItems:function(t,e){var r={};e.forEach((function(t){t.attributes&&t.attributes.images&&t.attributes.images.length>0&&(r[t.id]=t)})),t.objects.items=r},startLoading:function(t){t.ui.loadingCount=t.ui.loadingCount+1},completedLoading:function(t){t.ui.loadingCount=t.ui.loadingCount-1}},actions:{fetchObjects:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n,o,a,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,n("startLoading"),o="/api/"+e.type,e.query&&(o+=e.query),r.next=6,fetch(o);case 6:if(a=r.sent,200!==a.status&&304!==a.status){r.next=14;break}return r.next=10,a.json();case 10:return u=r.sent.data,u.forEach((function(t){n("storeObject",t)})),n("completedLoading"),r.abrupt("return",u);case 14:n("completedLoading");case 15:case"end":return r.stop()}}),r)})))()},fetchObject:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n,o,a,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.state,o=t.commit,!n.objects[e.type]||!n.objects[e.type][e.id]){r.next=5;break}return r.abrupt("return",n.objects[e.type][e.id]);case 5:return o("startLoading"),r.next=8,fetch("/api/"+e.type+"/"+e.id);case 8:if(a=r.sent,200!==a.status&&304!==a.status){r.next=16;break}return r.next=12,a.json();case 12:return u=r.sent.data,o("storeObject",u),o("completedLoading"),r.abrupt("return",u);case 16:o("completedLoading");case 17:case"end":return r.stop()}}),r)})))()},fetchRooms:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n,o,a,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.dispatch,o={type:"rooms"},e&&(o.query="?filter[id]="+e.join(",")),r.next=5,n("fetchObjects",o);case 5:return a=r.sent,u=[],a.forEach((function(t){t.relationships&&t.relationships.group&&u.push(t.relationships.group.data.id)})),r.next=10,n("fetchGroups",u);case 10:return r.abrupt("return",a);case 11:case"end":return r.stop()}}),r)})))()},fetchRoom:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n,o,a,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.state,o=t.dispatch,n.objects.rooms[e]){r.next=12;break}return r.next=4,o("fetchObject",{type:"rooms",id:e});case 4:if(a=r.sent,!a.relationships){r.next=9;break}return u=[o("fetchGroup",a.relationships.group.data.id),o("fetchFloor",a.relationships.floor.data.id)],r.next=9,Promise.all(u);case 9:return r.abrupt("return",a);case 12:return r.abrupt("return",n.objects.rooms[e]);case 13:case"end":return r.stop()}}),r)})))()},fetchGroups:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.dispatch,o={type:"groups"},e&&(o.query="?filter[id]="+e.join(",")),r.next=5,n("fetchObjects",o);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r)})))()},fetchGroup:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n,o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.state,o=t.dispatch,n.objects.groups[e]){r.next=8;break}return r.next=4,o("fetchObject",{type:"groups",id:e});case 4:return a=r.sent,r.abrupt("return",a);case 8:return r.abrupt("return",n.objects.groups[e]);case 9:case"end":return r.stop()}}),r)})))()},fetchFloors:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n,o,a,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.dispatch,o={type:"floors"},e&&(o.query="?filter[id]="+e.join(",")),r.next=5,n("fetchObjects",o);case 5:return a=r.sent,u=[],a.forEach((function(t){t.relationships&&t.relationships.rooms&&t.relationships.rooms.data.forEach((function(t){u.push(t.id)}))})),r.next=10,n("fetchRooms",u);case 10:return r.abrupt("return",a);case 11:case"end":return r.stop()}}),r)})))()},fetchFloor:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n,o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.state,o=t.dispatch,n.objects.floors[e]){r.next=8;break}return r.next=4,o("fetchObject",{type:"floors",id:e});case 4:return a=r.sent,r.abrupt("return",a);case 8:return r.abrupt("return",n.objects.floors[e]);case 9:case"end":return r.stop()}}),r)})))()},fetchRoomItems:function(t,e){return Object(L["a"])(regeneratorRuntime.mark((function r(){var n,o,a,u,c,i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.dispatch,o=t.commit,o("setItems",[]),r.next=4,n("fetchRoom",e);case 4:return a=r.sent,r.next=7,n("fetchGroup",a.relationships.group.data.id);case 7:return u=r.sent,c=u.relationships.items.data.map((function(t){return t.id})),r.next=11,fetch("/api/items?filter[id]="+c.join(","));case 11:return i=r.sent,r.next=14,i.json();case 14:s=r.sent.data,o("setItems",s);case 16:case"end":return r.stop()}}),r)})))()}},modules:{}});Object(n["c"])(w).use(G).use($).mount("#app")},ffbb:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("d4ec"),o=r("262e"),a=r("2caf"),u=r("ce1f"),c=function(t){Object(o["a"])(r,t);var e=Object(a["a"])(r);function r(){return Object(n["a"])(this,r),e.apply(this,arguments)}return r}(u["b"])}});
//# sourceMappingURL=app.5276fcea.js.map