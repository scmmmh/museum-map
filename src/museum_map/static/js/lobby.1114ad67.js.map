{"version":3,"sources":["webpack:///./node_modules/core-js/internals/get-substitution.js","webpack:///./src/views/Lobby.vue","webpack:///./src/views/Lobby.vue?246e","webpack:///./src/views/Lobby.vue?253c","webpack:///./node_modules/core-js/modules/es.string.replace.js","webpack:///./src/components/ItemThumbnail.vue","webpack:///./src/components/ItemThumbnail.vue?ee40","webpack:///./src/components/ItemThumbnail.vue?3b22"],"names":["toObject","floor","Math","replace","SUBSTITUTION_SYMBOLS","SUBSTITUTION_SYMBOLS_NO_NAMED","module","exports","matched","str","position","captures","namedCaptures","replacement","tailPos","length","m","symbols","undefined","call","match","ch","capture","charAt","slice","n","f","class","viewBox","d","todaysPick","rid","relationships","room","data","id","item","topics","topic","key","label","floors","to","attributes","floorZero","updateRandomPicks","aria-label","title","randomPicks","sampleWidth","this","$store","state","objects","Object","values","forEach","group","existingTopic","filter","t","groupId","push","size","sort","a","b","level","dispatch","then","components","ItemThumbnail","render","fixRegExpWellKnownSymbolLogic","fails","anObject","toLength","toInteger","requireObjectCoercible","advanceStringIndex","getSubstitution","regExpExec","wellKnownSymbol","REPLACE","max","min","maybeToString","it","String","REPLACE_KEEPS_$0","REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE","REPLACE_SUPPORTS_NAMED_GROUPS","re","exec","result","groups","_","nativeReplace","maybeCallNative","UNSAFE_SUBSTITUTE","searchValue","replaceValue","O","replacer","string","indexOf","res","done","value","rx","S","functionalReplace","global","fullUnicode","unicode","lastIndex","results","matchStr","accumulatedResult","nextSourcePosition","i","index","j","replacerArgs","concat","apply","src","thumbImageURL","images","alt","processParagraph","imageId","window","innerWidth","split","join","paragraph","props","watch","newValue","items","ids","map","ref"],"mappings":"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","file":"js/lobby.1114ad67.js","sourcesContent":["var toObject = require('../internals/to-object');\n\nvar floor = Math.floor;\nvar replace = ''.replace;\nvar SUBSTITUTION_SYMBOLS = /\\$([$&'`]|\\d{1,2}|<[^>]*>)/g;\nvar SUBSTITUTION_SYMBOLS_NO_NAMED = /\\$([$&'`]|\\d{1,2})/g;\n\n// `GetSubstitution` abstract operation\n// https://tc39.es/ecma262/#sec-getsubstitution\nmodule.exports = function (matched, str, position, captures, namedCaptures, replacement) {\n  var tailPos = position + matched.length;\n  var m = captures.length;\n  var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;\n  if (namedCaptures !== undefined) {\n    namedCaptures = toObject(namedCaptures);\n    symbols = SUBSTITUTION_SYMBOLS;\n  }\n  return replace.call(replacement, symbols, function (match, ch) {\n    var capture;\n    switch (ch.charAt(0)) {\n      case '$': return '$';\n      case '&': return matched;\n      case '`': return str.slice(0, position);\n      case \"'\": return str.slice(tailPos);\n      case '<':\n        capture = namedCaptures[ch.slice(1, -1)];\n        break;\n      default: // \\d\\d?\n        var n = +ch;\n        if (n === 0) return match;\n        if (n > m) {\n          var f = floor(n / 10);\n          if (f === 0) return match;\n          if (f <= m) return captures[f - 1] === undefined ? ch.charAt(1) : captures[f - 1] + ch.charAt(1);\n          return match;\n        }\n        capture = captures[n - 1];\n    }\n    return capture === undefined ? '' : capture;\n  });\n};\n","<template>\n    <article class=\"lobby\">\n        <div class=\"todays-picks\">\n            <h2>Item of the day</h2>\n            <div>\n                <item-thumbnail v-if=\"todaysPick\" :rid=\"todaysPick.relationships.room.data.id\" :item=\"todaysPick\"/>\n            </div>\n        </div>\n        <div class=\"main-areas\">\n            <h2>Major Collections</h2>\n            <ol>\n                <li v-for=\"topic in topics\" :key=\"topic.id\">\n                    <h3>{{topic.label}}</h3>\n                    <ul>\n                        <li v-for=\"floor in topic.floors\" :key=\"floor\"><router-link :to=\"{name: 'floor', params: {fid: floor.id}}\">{{floor.attributes.label}}</router-link></li>\n                    </ul>\n                </li>\n            </ol>\n            <div v-if=\"floorZero\">\n                <router-link :to=\"{name: 'floor', params: {fid: floorZero.id}}\">Explore the whole collection &rarr;</router-link>\n            </div>\n        </div>\n        <div class=\"random-picks\">\n            <h2>\n                <span>Selection from our collections</span>\n                <button @click=\"updateRandomPicks\" aria-label=\"Update selection\" title=\"Select a different set of items from our collection\">\n                    <svg viewBox=\"0 0 24 24\" class=\"icon\">\n                        <path d=\"M2 12C2 16.97 6.03 21 11 21C13.39 21 15.68 20.06 17.4 18.4L15.9 16.9C14.63 18.25 12.86 19 11 19C4.76 19 1.64 11.46 6.05 7.05C10.46 2.64 18 5.77 18 12H15L19 16H19.1L23 12H20C20 7.03 15.97 3 11 3C6.03 3 2 7.03 2 12Z\" />\n                    </svg>\n                </button>\n            </h2>\n            <ul>\n                <li v-for=\"item in randomPicks\" :key=\"item.id\">\n                    <item-thumbnail v-if=\"item.relationships.room\" :rid=\"item.relationships.room.data.id\" :item=\"item\"/>\n                </li>\n            </ul>\n        </div>\n    </article>\n</template>\n\n<script lang=\"ts\">\nimport { Options } from 'vue-class-component';\n\nimport { ComponentRoot } from '@/base';\nimport { JSONAPIItem, JSONAPIReference } from '@/store';\nimport ItemThumbnail from '../components/ItemThumbnail.vue';\n\ninterface LobbyTopic {\n    id: string;\n    label: string;\n    size: number;\n    groupId: string;\n    floors: JSONAPIItem[];\n}\n\n@Options({\n    components: {\n        ItemThumbnail,\n    }\n})\nexport default class Lobby extends ComponentRoot {\n    public sampleWidth = '';\n    public randomPicks = [];\n    public todaysPick = null;\n\n    public get topics() {\n        if (this.$store.state.objects['floor-topics']) {\n            const topics = [] as LobbyTopic[];\n            Object.values(this.$store.state.objects['floor-topics']).forEach((topic) => {\n                if (topic.relationships && topic.relationships.group && topic.relationships.floor && topic.attributes) {\n                    const existingTopic = topics.filter((t) => { return topic.relationships && topic.relationships.group && t.groupId === (topic.relationships.group.data as JSONAPIReference).id});\n                    const floor = this.$store.state.objects.floors[(topic.relationships.floor.data as JSONAPIReference).id];\n                    if (floor) {\n                        if (existingTopic.length === 0) {\n                            topics.push({\n                                id: topic.id,\n                                label: topic.attributes.label as string,\n                                size: topic.attributes.size as number,\n                                groupId: (topic.relationships.group.data as JSONAPIReference).id,\n                                floors: [floor]\n                            });\n                        } else {\n                            existingTopic[0].size = existingTopic[0].size + (topic.attributes.size as number);\n                            existingTopic[0].floors.push(floor);\n                        }\n                    }\n                }\n            });\n            topics.sort((a, b) => {\n                return b.size - a.size;\n            });\n            return topics.slice(0, 6);\n        } else {\n            return [];\n        }\n    }\n\n    public get floorZero() {\n        const floors = Object.values(this.$store.state.objects['floors']);\n        if (floors.length > 0) {\n            floors.sort((a, b) => {\n                if (a.attributes && b.attributes) {\n                    return (a.attributes.level as number) - (b.attributes.level as number);\n                } else {\n                    return 0;\n                }\n            });\n            return floors[0];\n        } else {\n            return null;\n        }\n    }\n\n    public created() {\n        this.$store.dispatch('fetchFloorTopics');\n        //this.$store.dispatch('fetchFloors');\n        this.$store.dispatch('fetchItemPicks', 'random').then((data) => {\n            this.randomPicks = data;\n        });\n        this.$store.dispatch('fetchItemPicks', 'todays').then((data) => {\n            if (data.length > 0) {\n                this.todaysPick = data[0];\n            } else {\n                this.todaysPick = null;\n            }\n        });\n    }\n\n    public updateRandomPicks() {\n        this.$store.dispatch('fetchItemPicks', 'random').then((data) => {\n            this.randomPicks = data;\n        });\n    }\n}\n</script>\n","\nimport { Options } from 'vue-class-component';\n\nimport { ComponentRoot } from '@/base';\nimport { JSONAPIItem, JSONAPIReference } from '@/store';\nimport ItemThumbnail from '../components/ItemThumbnail.vue';\n\ninterface LobbyTopic {\n    id: string;\n    label: string;\n    size: number;\n    groupId: string;\n    floors: JSONAPIItem[];\n}\n\n@Options({\n    components: {\n        ItemThumbnail,\n    }\n})\nexport default class Lobby extends ComponentRoot {\n    public sampleWidth = '';\n    public randomPicks = [];\n    public todaysPick = null;\n\n    public get topics() {\n        if (this.$store.state.objects['floor-topics']) {\n            const topics = [] as LobbyTopic[];\n            Object.values(this.$store.state.objects['floor-topics']).forEach((topic) => {\n                if (topic.relationships && topic.relationships.group && topic.relationships.floor && topic.attributes) {\n                    const existingTopic = topics.filter((t) => { return topic.relationships && topic.relationships.group && t.groupId === (topic.relationships.group.data as JSONAPIReference).id});\n                    const floor = this.$store.state.objects.floors[(topic.relationships.floor.data as JSONAPIReference).id];\n                    if (floor) {\n                        if (existingTopic.length === 0) {\n                            topics.push({\n                                id: topic.id,\n                                label: topic.attributes.label as string,\n                                size: topic.attributes.size as number,\n                                groupId: (topic.relationships.group.data as JSONAPIReference).id,\n                                floors: [floor]\n                            });\n                        } else {\n                            existingTopic[0].size = existingTopic[0].size + (topic.attributes.size as number);\n                            existingTopic[0].floors.push(floor);\n                        }\n                    }\n                }\n            });\n            topics.sort((a, b) => {\n                return b.size - a.size;\n            });\n            return topics.slice(0, 6);\n        } else {\n            return [];\n        }\n    }\n\n    public get floorZero() {\n        const floors = Object.values(this.$store.state.objects['floors']);\n        if (floors.length > 0) {\n            floors.sort((a, b) => {\n                if (a.attributes && b.attributes) {\n                    return (a.attributes.level as number) - (b.attributes.level as number);\n                } else {\n                    return 0;\n                }\n            });\n            return floors[0];\n        } else {\n            return null;\n        }\n    }\n\n    public created() {\n        this.$store.dispatch('fetchFloorTopics');\n        //this.$store.dispatch('fetchFloors');\n        this.$store.dispatch('fetchItemPicks', 'random').then((data) => {\n            this.randomPicks = data;\n        });\n        this.$store.dispatch('fetchItemPicks', 'todays').then((data) => {\n            if (data.length > 0) {\n                this.todaysPick = data[0];\n            } else {\n                this.todaysPick = null;\n            }\n        });\n    }\n\n    public updateRandomPicks() {\n        this.$store.dispatch('fetchItemPicks', 'random').then((data) => {\n            this.randomPicks = data;\n        });\n    }\n}\n","import { render } from \"./Lobby.vue?vue&type=template&id=df730790\"\nimport script from \"./Lobby.vue?vue&type=script&lang=ts\"\nexport * from \"./Lobby.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar fails = require('../internals/fails');\nvar anObject = require('../internals/an-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar getSubstitution = require('../internals/get-substitution');\nvar regExpExec = require('../internals/regexp-exec-abstract');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar REPLACE = wellKnownSymbol('replace');\nvar max = Math.max;\nvar min = Math.min;\n\nvar maybeToString = function (it) {\n  return it === undefined ? it : String(it);\n};\n\n// IE <= 11 replaces $0 with the whole match, as if it was $&\n// https://stackoverflow.com/questions/6024666/getting-ie-to-replace-a-regex-with-the-literal-string-0\nvar REPLACE_KEEPS_$0 = (function () {\n  // eslint-disable-next-line regexp/prefer-escape-replacement-dollar-char -- required for testing\n  return 'a'.replace(/./, '$0') === '$0';\n})();\n\n// Safari <= 13.0.3(?) substitutes nth capture where n>m with an empty string\nvar REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {\n  if (/./[REPLACE]) {\n    return /./[REPLACE]('a', '$0') === '';\n  }\n  return false;\n})();\n\nvar REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {\n  var re = /./;\n  re.exec = function () {\n    var result = [];\n    result.groups = { a: '7' };\n    return result;\n  };\n  return ''.replace(re, '$<a>') !== '7';\n});\n\n// @@replace logic\nfixRegExpWellKnownSymbolLogic('replace', function (_, nativeReplace, maybeCallNative) {\n  var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';\n\n  return [\n    // `String.prototype.replace` method\n    // https://tc39.es/ecma262/#sec-string.prototype.replace\n    function replace(searchValue, replaceValue) {\n      var O = requireObjectCoercible(this);\n      var replacer = searchValue == undefined ? undefined : searchValue[REPLACE];\n      return replacer !== undefined\n        ? replacer.call(searchValue, O, replaceValue)\n        : nativeReplace.call(String(O), searchValue, replaceValue);\n    },\n    // `RegExp.prototype[@@replace]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@replace\n    function (string, replaceValue) {\n      if (\n        typeof replaceValue === 'string' &&\n        replaceValue.indexOf(UNSAFE_SUBSTITUTE) === -1 &&\n        replaceValue.indexOf('$<') === -1\n      ) {\n        var res = maybeCallNative(nativeReplace, this, string, replaceValue);\n        if (res.done) return res.value;\n      }\n\n      var rx = anObject(this);\n      var S = String(string);\n\n      var functionalReplace = typeof replaceValue === 'function';\n      if (!functionalReplace) replaceValue = String(replaceValue);\n\n      var global = rx.global;\n      if (global) {\n        var fullUnicode = rx.unicode;\n        rx.lastIndex = 0;\n      }\n      var results = [];\n      while (true) {\n        var result = regExpExec(rx, S);\n        if (result === null) break;\n\n        results.push(result);\n        if (!global) break;\n\n        var matchStr = String(result[0]);\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n      }\n\n      var accumulatedResult = '';\n      var nextSourcePosition = 0;\n      for (var i = 0; i < results.length; i++) {\n        result = results[i];\n\n        var matched = String(result[0]);\n        var position = max(min(toInteger(result.index), S.length), 0);\n        var captures = [];\n        // NOTE: This is equivalent to\n        //   captures = result.slice(1).map(maybeToString)\n        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in\n        // the slice polyfill when slicing native arrays) \"doesn't work\" in safari 9 and\n        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.\n        for (var j = 1; j < result.length; j++) captures.push(maybeToString(result[j]));\n        var namedCaptures = result.groups;\n        if (functionalReplace) {\n          var replacerArgs = [matched].concat(captures, position, S);\n          if (namedCaptures !== undefined) replacerArgs.push(namedCaptures);\n          var replacement = String(replaceValue.apply(undefined, replacerArgs));\n        } else {\n          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);\n        }\n        if (position >= nextSourcePosition) {\n          accumulatedResult += S.slice(nextSourcePosition, position) + replacement;\n          nextSourcePosition = position + matched.length;\n        }\n      }\n      return accumulatedResult + S.slice(nextSourcePosition);\n    }\n  ];\n}, !REPLACE_SUPPORTS_NAMED_GROUPS || !REPLACE_KEEPS_$0 || REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);\n","<template>\n    <router-link :to=\"'/room/' + rid + '/' + item.id\">\n        <figure>\n            <img :src=\"thumbImageURL(item.attributes.images[0])\" alt=\"\"/>\n            <figcaption v-html=\"item.attributes.title ? processParagraph(item.attributes.title) : '[untitled]'\"></figcaption>\n        </figure>\n    </router-link>\n</template>\n\n<script lang=\"ts\">\nimport { Options } from 'vue-class-component';\n\nimport { ComponentRoot } from '@/base';\nimport { JSONAPIItem, JSONAPIReference } from '@/store';\n\n@Options({\n    components: {\n    },\n    props: ['rid', 'item'],\n    watch: {\n        async rid(newValue: string) {\n            const room = await this.$store.dispatch('fetchRoom', newValue);\n            if (room.relationships && room.relationships.items) {\n                const ids = (room.relationships.items.data as JSONAPIReference[]).map((ref) => {\n                    if (this.$store.state.objects.items[ref.id]) {\n                        return null;\n                    } else {\n                        return ref.id;\n                    }\n                }).filter((id) => {\n                    return id !== null;\n                });\n                if (ids.length > 0) {\n                    this.$store.dispatch('fetchItems', ids);\n                }\n            }\n        }\n    }\n})\nexport default class ItemThumbnail extends ComponentRoot {\n    $props!: {\n        rid: string;\n        item: JSONAPIItem;\n    };\n\n    public thumbImageURL(imageId: string) {\n        if (imageId) {\n            if (window.innerWidth <= 784) {\n                return '/images/' + imageId.split('').join('/') + '/' + imageId + '-320.jpg';\n            } else {\n                return '/images/' + imageId.split('').join('/') + '/' + imageId + '-240.jpg';\n            }\n        } else {\n            return '';\n        }\n    }\n\n    public processParagraph(paragraph: string) {\n        return paragraph\n            .replace(/<[iI]>/g, '\\\\begin{em}')\n            .replace(/<\\/[iI]>/g, '\\\\end{em}')\n            .replace(/<[uU]>/g, '\\\\begin{em}')\n            .replace(/<\\/[uU]>/g, '\\\\end{em}')\n            .replace(/<[bB]>/g, '\\\\begin{strong}')\n            .replace(/<\\/[bB]>/g, '\\\\end{strong}')\n            .replace(/<\\/?[a-zA-Z]+>/g, '')\n            .replace(/\\\\begin\\{em\\}/g, '<em>')\n            .replace(/\\\\end\\{em\\}/g, '</em>')\n            .replace(/\\\\begin\\{strong\\}/g, '<strong>')\n            .replace(/\\\\end\\{strong\\}/g, '</strong>');\n    }\n}\n</script>\n","\nimport { Options } from 'vue-class-component';\n\nimport { ComponentRoot } from '@/base';\nimport { JSONAPIItem, JSONAPIReference } from '@/store';\n\n@Options({\n    components: {\n    },\n    props: ['rid', 'item'],\n    watch: {\n        async rid(newValue: string) {\n            const room = await this.$store.dispatch('fetchRoom', newValue);\n            if (room.relationships && room.relationships.items) {\n                const ids = (room.relationships.items.data as JSONAPIReference[]).map((ref) => {\n                    if (this.$store.state.objects.items[ref.id]) {\n                        return null;\n                    } else {\n                        return ref.id;\n                    }\n                }).filter((id) => {\n                    return id !== null;\n                });\n                if (ids.length > 0) {\n                    this.$store.dispatch('fetchItems', ids);\n                }\n            }\n        }\n    }\n})\nexport default class ItemThumbnail extends ComponentRoot {\n    $props!: {\n        rid: string;\n        item: JSONAPIItem;\n    };\n\n    public thumbImageURL(imageId: string) {\n        if (imageId) {\n            if (window.innerWidth <= 784) {\n                return '/images/' + imageId.split('').join('/') + '/' + imageId + '-320.jpg';\n            } else {\n                return '/images/' + imageId.split('').join('/') + '/' + imageId + '-240.jpg';\n            }\n        } else {\n            return '';\n        }\n    }\n\n    public processParagraph(paragraph: string) {\n        return paragraph\n            .replace(/<[iI]>/g, '\\\\begin{em}')\n            .replace(/<\\/[iI]>/g, '\\\\end{em}')\n            .replace(/<[uU]>/g, '\\\\begin{em}')\n            .replace(/<\\/[uU]>/g, '\\\\end{em}')\n            .replace(/<[bB]>/g, '\\\\begin{strong}')\n            .replace(/<\\/[bB]>/g, '\\\\end{strong}')\n            .replace(/<\\/?[a-zA-Z]+>/g, '')\n            .replace(/\\\\begin\\{em\\}/g, '<em>')\n            .replace(/\\\\end\\{em\\}/g, '</em>')\n            .replace(/\\\\begin\\{strong\\}/g, '<strong>')\n            .replace(/\\\\end\\{strong\\}/g, '</strong>');\n    }\n}\n","import { render } from \"./ItemThumbnail.vue?vue&type=template&id=60116af7\"\nimport script from \"./ItemThumbnail.vue?vue&type=script&lang=ts\"\nexport * from \"./ItemThumbnail.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}