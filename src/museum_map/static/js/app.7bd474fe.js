(function(e){function t(t){for(var o,i,a=t[0],c=t[1],s=t[2],u=0,g=[];u<a.length;u++)i=a[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&g.push(n[i][0]),n[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(g.length)g.shift()();return A.push.apply(A,s||[]),r()}function r(){for(var e,t=0;t<A.length;t++){for(var r=A[t],o=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(o=!1)}o&&(A.splice(t--,1),e=a(a.s=r[0]))}return e}var o={},n={app:0},A=[];function i(e){return a.p+"js/"+({floor:"floor",item:"item",lobby:"lobby",room:"room"}[e]||e)+"."+{floor:"fd8733ff",item:"45ef0308",lobby:"1114ad67",room:"1b6ce30c"}[e]+".js"}function a(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,o){r=n[e]=[t,o]}));t.push(r[2]=o);var A,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=i(e);var s=new Error;A=function(t){c.onerror=c.onload=null,clearTimeout(u);var r=n[e];if(0!==r){if(r){var o=t&&("load"===t.type?"missing":t.type),A=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+A+")",s.name="ChunkLoadError",s.type=o,s.request=A,r[1](s)}n[e]=void 0}};var u=setTimeout((function(){A({type:"timeout",target:c})}),12e4);c.onerror=c.onload=A,document.head.appendChild(c)}return Promise.all(t)},a.m=e,a.c=o,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;A.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"654a":function(e,t,r){},"8b55":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAGQCAYAAABYs5LGAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAACINJREFUeJzt3Vty2lgUQFHRxUzu/IeksdAfabr6gR2MZF+xtdZXqhxc5ybIm2MX8mWBfd1mDxBxmT0A8F7+mD0AALDddfYANK3rOnuEtzTGmD0C8KZs6AAQIOgAECDoABAg6AAQIOgAECDoABAg6AAQIOgAECDoABAg6AAQIOgAECDoABAg6AAQIOgAECDoABAg6AAQIOgAECDoABAg6AAQIOgAECDoABAg6AAQIOgAECDoABAg6AAQIOgAECDoABAg6AAQIOgAECDoABAg6AAQIOgAECDoABAg6AAQIOgAECDoABAg6AAQcJk9ADm3jz6wruunDxxj7D7MTBvP69oEvsSGDgAB19kDkPNos/xwa//C53gnZzsvcAA2dAAIEHQACBB0AAgQdAAIEHQACBB0AAg48tvWvvrWHzrO9n9/tvMC38CGDgABR76hxW1Zfn/7TDij+21jz3J9nO288BX368OGDgABgg4AAYIOAAGCDgABgg4AAYIOAAGCDgABgg4AAYIOAAGCDgABgg4AAYIOAAGCDgABgg4AAYIOAAGCDgABgg4AAYIOAAGCDgABgg4AAYIOAAGCDgABgg4AAYIOAAGCDgABgg4AAYIOAAGX2QN84rblweu67jXHsizLMsbY9fM9yzkec479OdvzPP+2cY7Htp7Dhg4AAYff0Pd+BfTT7q+4nOMYnOM9Vc7rHMdSO4cNHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACrsuy3GYPAQBsY0MHgIDr/Q/rus6c43/GGLNHAIC3YUMHgABBB4AAQQeAgOvv/8ocR/uZPgAcmQ0dAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACBB0AAg4b9DGG37gGAE86bNABgOcJOgAECDoABAg6AAQIOgAECDoABAg6AAQIOgAECDoABAg6AAQIOgAECDoABAg6AARcZw8A8KxXfwPjuq6HmGPr451j3zm2Pv5o57ChA0CADR14G3tvRK86yhxbOcexvHqO+2ZvQweAAEEHgABBB4AAQQeAAEEHgABBB4AAQQeAAEEHgABBB4AAQQeAAEEHgABBB4AAQQeAAEEHgABBB4AAQQeAAEEHgABBB4AAQQeAAEEHgABBB4AAQQeAAEEHgABBB4AAQQeAAEEHgABBB4CA6+wBAJ41xnjpceu6HmKOrZzjMef4xYYOAAE2dOBt7L0RverVOe4bmHPsyzl+ncOGDgABgg4AAYIOAAGCDgABgg4AAYIOAAGCDgABgg4AAYIOAAGCDgABgg4AAYIOAAGCDgABgg4AAYIOAAGCDgABgg4AAYIOAAGCDgABgg4AAYIOAAGCDgABgg4AAdfZA3xkXdfZIwDA27ChA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQMBhgz7GWMYYs8cAgLdw2KADAM8TdAAIEHQACPj7t635eTUAvC8bOgAEXJdlucwe4gO32QMAwLuwoQNAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAgKADQICgA0CAoANAwGX2AJ+4bXnwuq57zbEsy7KMMXb9fM9yjsecY3/O9jzPv22c47Gt57ChA0DA4Tf0vV8BQcH9lfxZro+znRe+4n592NABIEDQASBA0AEgQNABIEDQASBA0AEgQNABIEDQASDgOnsA4OvOdoOVs50XXmFDB4AAQQeAAEEHgABBB4AAQQeAAEEHgABBB4AAQQeAAEEHgABBhzc0xljGGLPH+DFnOy+8QtABIEDQASBA0AEgQNABIEDQASBA0AEgQNABIEDQASDgMnuAT9xmD/Dd1nX99ONupMEefvc8m83znD34empDB4CE6+wBPnHk7x5s9dXvPpT/LXjNbVmOv30/45kz/GO7ci3wX76e/sWGDgABgg4AAYIOAAGCDgABgg4AAYIOAAGCDgABR34fesUed7zL3zUPnuRaYKtHz6HEe9Nt6AAQYEP/Ia/c0atwFzC+xxnuS/2Ia4JXPXru1K4jGzoABAg6AAQIOgAECDoABAg6AAQIOgAECDoABAg6AAS4sQy8obPdYOVs54VX2NABIEDQASBA0AEgQNABIEDQASBA0AEgQNABIEDQASBA0AEgQNDhDY0xljHG7DF+zNnOC68QdAAIEHQACBB0AAgQdAAIEHQACBB0AAgQdAAIEHQACLjOHuAs3BQDtnMdwcds6AAQYEP/fpfZA5B0mz3AJK4n+IANHQACBB0AAgQdAAIEHQACBB0AAgQdAAK8BQTek7etAf9iQweAgD8BbYn3cZbfBM0AAAAASUVORK5CYII="},a450:function(e,t,r){"use strict";r("654a")},a9a1:function(e,t,r){"use strict";var o=r("7a23"),n=r("8b55"),A=r.n(n),i={class:"map"},a={class:"wrapper"},c=Object(o["g"])("img",{src:A.a,alt:""},null,-1),s={class:"description"},u={key:2},l=Object(o["g"])("svg",{viewBox:"0 0 24 24"},[Object(o["g"])("path",{d:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"})],-1),g=Object(o["g"])("svg",{viewBox:"0 0 24 24"},[Object(o["g"])("path",{d:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"})],-1),f={key:0,class:"rooms"},d={class:"topics"},b=Object(o["g"])("div",null,null,-1),p={key:0},h={key:0};function O(e,t,r,n,A,O){var m=Object(o["v"])("router-link");return Object(o["p"])(),Object(o["d"])("section",{id:"map",class:e.overlay?"overlay":""},[Object(o["g"])("div",null,[!e.isSmall&&e.overlay?(Object(o["p"])(),Object(o["d"])("button",{key:0,class:"close",onClick:t[1]||(t[1]=function(t){return e.setMapFloorId(null)})},"✖")):Object(o["e"])("",!0),Object(o["g"])("div",i,[Object(o["g"])("div",a,[c,(Object(o["p"])(!0),Object(o["d"])(o["a"],null,Object(o["u"])(e.rooms,(function(r){return Object(o["p"])(),Object(o["d"])(m,{key:r.id,to:{name:"room",params:{rid:r.id}},style:r.attributes.position,"aria-selected":e.highlightedRoom&&r.id===e.highlightedRoom.id?"true":"false",onClick:t[2]||(t[2]=function(t){return e.setMapFloorId(null)}),onMouseover:function(t){return e.highlightRoom(r)}},{default:Object(o["A"])((function(){return[Object(o["g"])("span",null,Object(o["x"])(e.mapLabel(r.attributes.label)),1)]})),_:2},1032,["to","style","aria-selected","onMouseover"])})),128))])]),Object(o["g"])("div",s,[Object(o["g"])("h2",null,[e.isSmall&&e.overlay?(Object(o["p"])(),Object(o["d"])("button",{key:0,onClick:t[3]||(t[3]=function(t){return e.setMapFloorId(null)})},"✖")):Object(o["e"])("",!0),e.overlay?(Object(o["p"])(),Object(o["d"])(m,{key:1,to:{name:"floor",params:{fid:e.floor.id}}},{default:Object(o["A"])((function(){return[Object(o["f"])(Object(o["x"])(e.floor.attributes.label),1)]})),_:1},8,["to"])):(Object(o["p"])(),Object(o["d"])("span",u,Object(o["x"])(e.floor.attributes.label),1)),e.overlay?(Object(o["p"])(),Object(o["d"])(o["a"],{key:3},[Object(o["g"])("button",{onClick:t[4]||(t[4]=function(t){return e.moveFloorUpDown(1)})},[l]),Object(o["g"])("button",{onClick:t[5]||(t[5]=function(t){return e.moveFloorUpDown(-1)})},[g])],64)):Object(o["e"])("",!0)]),e.isSmall?(Object(o["p"])(),Object(o["d"])("ul",f,[(Object(o["p"])(!0),Object(o["d"])(o["a"],null,Object(o["u"])(e.rooms,(function(r){return Object(o["p"])(),Object(o["d"])("li",{key:r.id},[Object(o["g"])(m,{to:{name:"room",params:{rid:r.id}},"aria-selected":e.highlightedRoom&&r.id===e.highlightedRoom.id?"true":"false",onClick:t[6]||(t[6]=function(t){return e.setMapFloorId(null)}),onMouseover:function(t){return e.highlightRoom(r)}},{default:Object(o["A"])((function(){return[Object(o["f"])(Object(o["x"])(r.attributes.label),1)]})),_:2},1032,["to","aria-selected","onMouseover"])])})),128))])):(Object(o["p"])(),Object(o["d"])(o["a"],{key:1},[Object(o["g"])("ul",d,[(Object(o["p"])(!0),Object(o["d"])(o["a"],null,Object(o["u"])(e.floorTopics,(function(e){return Object(o["p"])(),Object(o["d"])("li",{key:e.id},Object(o["x"])(e.attributes.label),1)})),128))]),b,e.highlightedRoom?(Object(o["p"])(),Object(o["d"])("section",p,[Object(o["g"])("h3",null,Object(o["x"])(e.highlightedRoom.attributes.label),1),e.highlightedRoomItem?(Object(o["p"])(),Object(o["d"])("figure",h,[Object(o["g"])("img",{src:e.thumbImageURL(e.highlightedRoomItem.attributes.images[0]),alt:""},null,8,["src"])])):Object(o["e"])("",!0)])):Object(o["e"])("",!0)],64))])])],2)}var m=r("1da1"),j=r("d4ec"),B=r("bee2"),Q=r("262e"),C=r("2caf"),v=(r("96cf"),r("4de4"),r("d81d"),r("a15b"),r("ac1f"),r("1276"),r("07ac"),r("4e82"),r("9ab4")),I=r("ce1f"),y=r("ffbb"),E=function(e){Object(Q["a"])(r,e);var t=Object(C["a"])(r);function r(){var e;return Object(j["a"])(this,r),e=t.apply(this,arguments),e.highlightedRoom=null,e}return Object(B["a"])(r,[{key:"highlightedRoomItem",get:function(){if(this.highlightedRoom&&this.highlightedRoom.relationships&&this.highlightedRoom.relationships.sample){if(this.$store.state.objects.items[this.highlightedRoom.relationships.sample.data.id])return this.$store.state.objects.items[this.highlightedRoom.relationships.sample.data.id];this.$store.dispatch("fetchItem",this.highlightedRoom.relationships.sample.data.id)}return null}},{key:"rooms",get:function(){var e=this;if(this.$props.floor&&this.$props.floor.relationships){var t=this.$props.floor.relationships.rooms.data.map((function(t){return e.$store.state.objects.rooms[t.id]?e.$store.state.objects.rooms[t.id]:null})).filter((function(e){return null!==e}));return t}return[]}},{key:"floorTopics",get:function(){var e=this;if(this.$props.floor&&this.$props.floor.relationships){var t=this.$props.floor.relationships.topics.data.map((function(t){return e.$store.state.objects["floor-topics"][t.id]?e.$store.state.objects["floor-topics"][t.id]:null})).filter((function(e){return null!==e}));return t}return[]}},{key:"created",value:function(){this.$store.dispatch("fetchFloor",this.$props.floor.id)}},{key:"isSmall",get:function(){return window.innerWidth<=784}},{key:"setMapFloorId",value:function(e){this.$store.commit("setMapFloorId",e)}},{key:"highlightRoom",value:function(e){this.highlightedRoom=e}},{key:"mapLabel",value:function(e){return e.indexOf(" - ")>=0?e.substring(0,e.indexOf(" - ")):e}},{key:"thumbImageURL",value:function(e){return e?"/images/"+e.split("").join("/")+"/"+e+".jpg":""}},{key:"moveFloorUpDown",value:function(e){var t=Object.values(this.$store.state.objects.floors);t.sort((function(e,t){return e.attributes&&t.attributes?e.attributes.level-t.attributes.level:0})),this.$store.commit("setMapFloorId",t[Math.min(Math.max(t.indexOf(this.$props.floor)+e,0),t.length-1)].id)}}]),r}(y["a"]);E=Object(v["a"])([Object(I["a"])({props:["floor","overlay"],watch:{floor:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("fetchFloor",e.id);case 2:case"end":return r.stop()}}),r)})))()}}})],E);var D=E;D.render=O;t["a"]=D},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("7a23"),n={key:0},A=Object(o["f"])("Museum Map"),i={key:1},a=Object(o["f"])("Museum Map"),c={key:0,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#ffffff"},s=Object(o["g"])("g",{fill:"none","fill-rule":"evenodd"},[Object(o["g"])("g",{transform:"translate(1 1)","stroke-width":"3"},[Object(o["g"])("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[Object(o["g"])("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1.5s",repeatCount:"indefinite"})])])],-1),u=Object(o["f"])("Lobby"),l={key:0},g={key:1},f=Object(o["g"])("footer",null,[Object(o["g"])("div",null,[Object(o["g"])("a",{href:"https://www.room3b.eu/pages/projects/digital-museum-map.html",target:"_blank",rel:"noopener"},[Object(o["f"])("Find out more"),Object(o["g"])("span",{class:"hide-for-small"}," about how this works")])]),Object(o["g"])("div",null,[Object(o["g"])("a",{href:"https://collections.vam.ac.uk/",target:"_blank",rel:"noopener"},"Objects, Images, and Meta-data provided by the V&A")]),Object(o["g"])("div",null,[Object(o["g"])("a",{href:"http://www.getty.edu/research/tools/vocabularies/aat/",target:"_blank",rel:"noopener"},"Includes part of the AAT")])],-1);function d(e,t,r,d,b,p){var h=Object(o["v"])("router-link"),O=Object(o["v"])("router-view");return Object(o["p"])(),Object(o["d"])("main",null,[Object(o["g"])("header",null,[e.isSmall?(Object(o["p"])(),Object(o["d"])("h1",n,[e.currentFloor&&e.currentRoom?(Object(o["p"])(),Object(o["d"])("button",{key:0,onClick:t[1]||(t[1]=function(t){return e.setMapFloorId(e.currentFloor.id)})},Object(o["x"])(e.roomTitle),1)):(Object(o["p"])(),Object(o["d"])(o["a"],{key:1},[A],64))])):(Object(o["p"])(),Object(o["d"])("div",i,[Object(o["g"])("h1",null,[a,e.currentRoom?(Object(o["p"])(),Object(o["d"])(o["a"],{key:0},[Object(o["f"])(" - "+Object(o["x"])(e.roomTitle),1)],64)):Object(o["e"])("",!0)]),e.loading?(Object(o["p"])(),Object(o["d"])("svg",c,[s])):Object(o["e"])("",!0)])),Object(o["g"])("nav",null,[Object(o["g"])("ol",null,[Object(o["g"])("li",null,[Object(o["g"])(h,{to:{name:"lobby"}},{default:Object(o["A"])((function(){return[u]})),_:1})]),e.currentFloor?(Object(o["p"])(),Object(o["d"])("li",l,[Object(o["g"])(h,{to:{name:"floor",params:{fid:e.currentFloor.id}}},{default:Object(o["A"])((function(){return[Object(o["f"])(Object(o["x"])(e.currentFloor.attributes.label),1)]})),_:1},8,["to"])])):Object(o["e"])("",!0),e.currentRoom&&!e.isSmall?(Object(o["p"])(),Object(o["d"])("li",g,[Object(o["g"])("button",{onClick:t[2]||(t[2]=function(t){return e.setMapFloorId(e.currentFloor.id)})},"Room "+Object(o["x"])(e.roomTitle),1)])):Object(o["e"])("",!0)])])]),Object(o["g"])(O),f])}var b=r("d4ec"),p=r("bee2"),h=r("262e"),O=r("2caf"),m=r("9ab4"),j=r("ce1f"),B=r("ffbb"),Q=r("a9a1"),C=function(e){Object(h["a"])(r,e);var t=Object(O["a"])(r);function r(){return Object(b["a"])(this,r),t.apply(this,arguments)}return Object(p["a"])(r,[{key:"loading",get:function(){return this.$store.state.ui.loadingCount>0}},{key:"currentRoom",get:function(){if(this.$router.currentRoute&&this.$router.currentRoute.value.params.rid){var e=this.$router.currentRoute.value.params.rid;if(this.$store.state.objects.rooms[e])return this.$store.state.objects.rooms[e]}return null}},{key:"roomTitle",get:function(){return this.currentRoom&&this.currentRoom.attributes?this.currentRoom.attributes.number+" - "+this.currentRoom.attributes.label:"Museum Map"}},{key:"currentFloor",get:function(){if(this.currentRoom){if(this.currentRoom.relationships&&this.currentRoom.relationships.floor){var e=this.currentRoom.relationships.floor.data.id;if(this.$store.state.objects.floors[e])return this.$store.state.objects.floors[e]}}else if(this.$router.currentRoute&&this.$router.currentRoute.value.params.fid){var t=this.$router.currentRoute.value.params.fid;if(this.$store.state.objects.floors[t])return this.$store.state.objects.floors[t]}return null}},{key:"isSmall",get:function(){return window.innerWidth<=784}},{key:"setMapFloorId",value:function(e){this.$store.commit("setMapFloorId",e)}}]),r}(B["a"]);C=Object(m["a"])([Object(j["a"])({components:{OverviewMap:Q["a"]},watch:{roomTitle:function(e){document.title="Room "+e}}})],C);var v=C;r("a450");v.render=d;var I=v,y=(r("d3b7"),r("3ca3"),r("ddb0"),r("6c02")),E=[{path:"/",name:"lobby",component:function(){return r.e("lobby").then(r.bind(null,"417e"))}},{path:"/floor/:fid",name:"floor",component:function(){return r.e("floor").then(r.bind(null,"e968"))},props:!0},{path:"/room/:rid",name:"room",component:function(){return r.e("room").then(r.bind(null,"3ab1"))},props:!0,children:[{path:":iid",name:"item",component:function(){return r.e("item").then(r.bind(null,"f0df"))},props:!0}]}],D=Object(y["a"])({history:Object(y["b"])(),routes:E}),w=D,R=r("3835"),k=r("1da1"),x=(r("96cf"),r("159b"),r("07ac"),r("4de4"),r("d81d"),r("99af"),r("4fad"),r("a15b"),r("5502")),H=Object(x["a"])({state:{objects:{rooms:{},floors:{},items:{},groups:{},"floor-topics":{}},ui:{loadingCount:0,mapFloorId:null}},mutations:{storeObject:function(e,t){e.objects[t.type][t.id]=t},storeObjects:function(e,t){t.forEach((function(t){e.objects[t.type][t.id]=t}))},startLoading:function(e){e.ui.loadingCount=e.ui.loadingCount+1},completedLoading:function(e){e.ui.loadingCount=e.ui.loadingCount-1},setMapFloorId:function(e,t){e.ui.mapFloorId=t}},actions:{fetchRelationships:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function r(){var o,n,A;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:o=e.state,n=e.dispatch,A={},t.forEach((function(e){e.relationships&&Object.values(e.relationships).forEach((function(e){if(e.data.length){if(e.data.length>0){var t=e.data.map((function(e){return o.objects[e.type][e.id]?null:!A[e.type]||A[e.type].indexOf(e.id)<0?e.id:null})).filter((function(e){return null!==e}));t.length>0&&(A[e.data[0].type]?A[e.data[0].type]=A[e.data[0].type].concat(t):A[e.data[0].type]=t)}}else o.objects[e.data.type][e.data.id]||(A[e.data.type]?A[e.data.type].indexOf(e.data.id)<0&&A[e.data.type].push(e.data.id):A[e.data.type]=[e.data.id])}))})),Object.entries(A).forEach((function(e){var t=Object(R["a"])(e,2),r=t[0],o=t[1];n("fetchObjects",{type:r,query:"?filter[id]="+o.join(","),fetchRelationships:!1})}));case 4:case"end":return r.stop()}}),r)})))()},fetchObjects:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function r(){var o,n,A,i,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.dispatch,n=e.commit,n("startLoading"),A="/api/"+t.type,t.query&&(A+=t.query),r.next=6,fetch(A);case 6:if(i=r.sent,200!==i.status&&304!==i.status){r.next=15;break}return r.next=10,i.json();case 10:return a=r.sent.data,n("storeObjects",a),t.fetchRelationships&&o("fetchRelationships",a),n("completedLoading"),r.abrupt("return",a);case 15:n("completedLoading");case 16:case"end":return r.stop()}}),r)})))()},fetchObject:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function r(){var o,n,A,i,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=e.state,n=e.dispatch,A=e.commit,!o.objects[t.ref.type]||!o.objects[t.ref.type][t.ref.id]){r.next=6;break}return n("fetchRelationships",[o.objects[t.ref.type][t.ref.id]]),r.abrupt("return",o.objects[t.ref.type][t.ref.id]);case 6:return A("startLoading"),r.next=9,fetch("/api/"+t.ref.type+"/"+t.ref.id);case 9:if(i=r.sent,200!==i.status&&304!==i.status){r.next=18;break}return r.next=13,i.json();case 13:return a=r.sent.data,A("storeObject",a),t.fetchRelationships&&n("fetchRelationships",[a]),A("completedLoading"),r.abrupt("return",a);case 18:A("completedLoading");case 19:case"end":return r.stop()}}),r)})))()},fetchRooms:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.dispatch,n={type:"rooms",fetchRelationships:!0},t&&(n.query="?filter[id]="+t.join(",")),r.next=5,o("fetchObjects",n);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r)})))()},fetchRoom:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.dispatch,r.next=3,o("fetchObject",{ref:{type:"rooms",id:t},fetchRelationships:!0});case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),r)})))()},fetchFloors:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.dispatch,n={type:"floors",fetchRelationships:!0},t&&(n.query="?filter[id]="+t.join(",")),r.next=5,o("fetchObjects",n);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r)})))()},fetchFloor:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.dispatch,r.next=3,o("fetchObject",{ref:{type:"floors",id:t},fetchRelationships:!0});case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),r)})))()},fetchItems:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.dispatch,n={type:"items",fetchRelationships:!0},t&&(n.query="?filter[id]="+t.join(",")),r.next=5,o("fetchObjects",n);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r)})))()},fetchItem:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.dispatch,r.next=3,o("fetchObject",{ref:{type:"items",id:t},fetchRelationships:!0});case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),r)})))()},fetchFloorTopics:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.dispatch,n={type:"floor-topics",fetchRelationships:!0},t&&(n.query="?filter[id]="+t.join(",")),r.next=5,o("fetchObjects",n);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r)})))()},fetchItemPicks:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function r(){var o,n,A,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e.commit,o("startLoading"),n="/api/picks/"+t,r.next=5,fetch(n);case 5:if(A=r.sent,200!==A.status&&304!==A.status){r.next=13;break}return r.next=9,A.json();case 9:return i=r.sent.data,i.forEach((function(e){o("storeObject",e)})),o("completedLoading"),r.abrupt("return",i);case 13:o("completedLoading");case 14:case"end":return r.stop()}}),r)})))()}},modules:{}});Object(o["c"])(I).use(w).use(H).mount("#app")},ffbb:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var o=r("d4ec"),n=r("262e"),A=r("2caf"),i=r("ce1f"),a=function(e){Object(n["a"])(r,e);var t=Object(A["a"])(r);function r(){return Object(o["a"])(this,r),t.apply(this,arguments)}return r}(i["b"])}});
//# sourceMappingURL=app.7bd474fe.js.map